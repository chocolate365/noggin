<!-- tasks/list.html -->

{% extends 'tasks/base.html' %}

{% block content %}

<div class="row">

	<!-- display the list and all tasks for a selected list -->
	<section class="col-md-8">

		<!-- list heading -->
		<div class="text-center mt-4">
			<h4>
				<!-- Add a new list -->
				<a href="{% url 'new-task' %}" class="bi bi-plus-lg link-dark text-decoration-none float-start mx-3" 
				data-bs-toggle="tooltip" data-bs-placement="top" title="Add a new task" >
				</a>
				
				<!-- Display and edit list name -->
				{{ list_item.name }} 
				<a href="{% url 'tasks-updatelist' list_item.id %}"class="bi bi-pencil link-dark text-decoration-none mx-2" data-bs-toggle="tooltip" data-bs-placement="top" title="Edit the list name" ></a>
				<!-- Print list -->
				<a href="#" class="bi bi-printer link-dark text-decoration-none mx-2" data-bs-toggle="tooltip" data-bs-placement="top" title="Not enabled yet" ></a>
				
				
				<!-- Delete list -->
				<span data-bs-toggle="modal" data-bs-target="#del-list-modal">
				<a href="#" class="bi bi-trash3 float-end" 
					data-bs-toggle="tooltip" data-bs-placement="top" title="Delete the list" >
				</a>
				</span>



			</h4>
		</div>

		<!-- modal to confirm list deletion -->
<div class="modal fade" id="del-list-modal" tabindex="-1" aria-labelledby="modal-title" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="modal-title">Are you sure you want to delete?</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<p>This is irreversible!</p>

			</div>
			<div class="modal-footer">
				<a href="{% url 'tasks-deletelist' list_item.id %}" class="btn btn-danger" role="button">Yes, delete</a>
				<button type="button" class="btn btn-primary" data-bs-dismiss="modal" aria-label="Close">No, do not
					delete</button>
			</div>
		</div>
	</div>
</div>

		<!-- display all tasks for the selected list -->
		<section>
		
			<ul class="list-group">
				<div></div>
				{% for task in list_tasks %}
				<li class="list-group-item list-group-item-action py-1">
					<a href="{% url 'tasks-task' task.id %}" class="link-secondary text-decoration-none" data-bs-toggle="tooltip" data-bs-placement="top" title="See task detail" >
						 {{ task.name }}
					</a>
					{% if task.user_date %}, ({{ task.user_date|date:'F j, Y' }}){% endif %}


					<span data-bs-toggle="modal" data-bs-target="#del-list-task-modal">
					<a href="#" class="bi bi-trash3 link-primary float-end" data-bs-toggle="tooltip" data-bs-placement="top" title="Delete this task" ></a>
					</span>


					<!-- modal to confirm list task deletion -->
<div class="modal fade" id="del-list-task-modal" tabindex="-1" aria-labelledby="modal-title" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="modal-title">Are you sure you want to delete?</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<p>This is irreversible!</p>

			</div>
			<div class="modal-footer">
				<a href="{% url 'tasks-deletetask' task.id %}" class="btn btn-danger" role="button">Yes, delete</a>
				<button type="button" class="btn btn-primary" data-bs-dismiss="modal" aria-label="Close">No, do not
					delete</button>
			</div>
		</div>
	</div>
</div>




				</li>
				{% empty %}
				<li class="list-group-item">No tasks have been added to this list yet.</li>
				{% endfor %}
			</ul>

		</section>
	</section>
	
	<!-- display all lists -->
	<section class="col-md-4">			
		{% include 'partials/list-page.html' %}
	</section>
		
</div>





		{% endblock %}